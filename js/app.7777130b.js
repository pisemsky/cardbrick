(function(t){function e(e){for(var r,i,o=e[0],c=e[1],u=e[2],d=0,f=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&f.push(s[i][0]),s[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},s={app:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("64a9"),s=n.n(r);s.a},"03ed":function(t,e,n){},"1cac":function(t,e,n){"use strict";var r=n("38e8"),s=n.n(r);s.a},2258:function(t,e,n){"use strict";var r=n("d95b"),s=n.n(r);s.a},"38e8":function(t,e,n){},"4abd":function(t,e,n){"use strict";var r=n("6d95"),s=n.n(r);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("game-app")],1)},a=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("game-screen",t._b({on:{pause:function(e){return t.pause()},down:function(e){return t.down()},right:function(e){return t.right()},left:function(e){return t.left()}}},"game-screen",{state:t.state,cards:t.cards,hit:t.hit,level:t.level,score:t.score,hits:t.hits},!1))},o=[],c=(n("7514"),n("2ef0")),u=n.n(c),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"screen",attrs:{tabindex:"0"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"pause",void 0,e.key,void 0)?null:(e.preventDefault(),t.pause())},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.down())},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])?null:"button"in e&&2!==e.button?null:(e.preventDefault(),t.right())},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:(e.preventDefault(),t.left())}]}},[n("div",{staticClass:"field"},["started"==t.state?n("game-table",{attrs:{cards:t.cards,hit:t.hit}}):t._e(),"initial"==t.state?n("game-message",{attrs:{message:"press P to play"}}):t._e(),"paused"==t.state?n("game-message",{attrs:{message:"pause"}}):t._e(),"stopped"==t.state?n("game-message",{attrs:{message:"game over"}}):t._e()],1),n("game-status",{staticClass:"status-left",attrs:{mapping:{hits:t.hits}}}),n("game-status",{staticClass:"status-right",attrs:{mapping:{score:t.score}}}),n("game-button",{staticClass:"button-nw",attrs:{caption:"L"},on:{click:function(e){return e.preventDefault(),t.left()}}}),n("game-button",{staticClass:"button-ne",attrs:{caption:"R"},on:{click:function(e){return e.preventDefault(),t.right()}}}),n("game-button",{staticClass:"button-se",attrs:{caption:"D"},on:{click:function(e){return e.preventDefault(),t.down()}}}),n("game-button",{staticClass:"button-sw",attrs:{caption:"P"},on:{click:function(e){return e.preventDefault(),t.pause()}}})],1)},d=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table"},[t._l(t.cards,(function(e){return n("game-card",{key:e.id,style:t.getCardStyle(e),attrs:{card:e}})})),t.hit?n("game-hit",{style:t.getHitStyle(t.hit),attrs:{hit:t.hit}}):t._e()],2)},h=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card",class:t.card.suit},[n("div",[t._v(t._s(t.card.rank))]),n("div",{staticClass:"card-suit"})])},v=[],m={name:"GameCard",props:["card"]},g=m,b=(n("ced9"),n("2877")),y=Object(b["a"])(g,p,v,!1,null,"43bceab3",null),k=y.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hit"})},w=[],_=(n("c5f9"),{}),x=Object(b["a"])(_,C,w,!1,null,"327b5403",null),O=x.exports,j={name:"GameTable",components:{GameCard:k,GameHit:O},props:["cards","hit"],methods:{getCardStyle:function(t){return{"grid-column":t.x+1,"grid-row":t.y+1}},getHitStyle:function(t){return{"grid-column-start":t.x+1,"grid-column-end":t.x+1+t.length,"grid-row":t.y+1}}}},L=j,G=(n("5b27"),Object(b["a"])(L,f,h,!1,null,"cf6d9fc8",null)),$=G.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"message"},[t._v(t._s(t.message))])},S=[],A={name:"GameMessage",props:["message"]},E=A,M=(n("1cac"),Object(b["a"])(E,D,S,!1,null,"363b9aed",null)),P=M.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dl",[t._l(t.mapping,(function(e,r,s){return[n("dt",{key:s+"-name"},[t._v(t._s(r))]),n("dd",{key:s+"-value"},[t._v(t._s(e))])]}))],2)},R=[],T={name:"GameStatus",props:["mapping"]},I=T,J=(n("4abd"),Object(b["a"])(I,H,R,!1,null,"1868f3f4",null)),N=J.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"button",on:{click:function(e){return t.$emit("click",e)}}},[t._v(t._s(t.caption))])},F=[],K={name:"GameButton",props:["caption"]},Q=K,V=(n("2258"),Object(b["a"])(Q,B,F,!1,null,"c03fcc9c",null)),q=V.exports,z={name:"GameScreen",props:["state","cards","hit","level","score","hits"],components:{GameTable:$,GameMessage:P,GameStatus:N,GameButton:q},methods:{pause:function(){this.$emit("pause")},left:function(){this.$emit("left")},right:function(){this.$emit("right")},down:function(){this.$emit("down")}}},U=z,W=(n("b55b"),Object(b["a"])(U,l,d,!1,null,"6808d903",null)),X=W.exports,Y=1e3,Z={name:"GameApp",components:{GameScreen:X},data:function(){return{cols:10,rows:6,hits:0,level:0,score:0,deck:[],cards:[],currentCard:null,mainLoop:null,hit:null,state:"initial"}},methods:{stop:function(){this.stopLoop(),this.state="stopped"},pause:u.a.throttle((function(){switch(this.state){case"initial":case"stopped":this.hits=0,this.score=0,this.level=0,this.cards.splice(0,this.cards.length),this.generateDeck(),this.currentCard=null,this.state="started",this.main(),this.startLoop();break;case"started":this.stopLoop(),this.state="paused";break;case"paused":this.startLoop(),this.state="started";break}}),Y,{trailing:!1}),left:function(){if("started"==this.state&&this.currentCard){var t=this.currentCard;t.x>0&&!this.findCard(t.x-1,t.y)&&(t.x-=1)}},right:function(){if("started"==this.state&&this.currentCard){var t=this.currentCard;t.x<this.cols-1&&!this.findCard(t.x+1,t.y)&&(t.x+=1)}},down:function(){if("started"==this.state){if(this.stopLoop(),this.currentCard)for(;;)if(!this.lowerCard(this.currentCard))break;this.main(),"started"==this.state&&this.startLoop()}},startLoop:function(){var t=this;this.stopLoop(),this.mainLoop=setInterval((function(){return t.main()}),Y)},stopLoop:function(){this.mainLoop&&clearInterval(this.mainLoop)},lowerCard:function(t){return t.y<this.rows-1&&!this.findCard(t.x,t.y+1)&&(t.y+=1,!0)},generateDeck:function(){for(var t=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],e=["spades","clubs","diamonds","hearts"],n=[],r=this.level+1,s=0;s<e.length;s++)for(var a=0;a<t.length;a++){var i=t[a],o=e[s];n.push({rank:i,suit:o,id:i+"-"+o+"-"+r})}var c=0;while(n.length>0){var u=Math.floor(Math.random()*n.length),l=n[u];l.value=this.cardValue(l),l.deckRow=parseInt(c/this.cols,10);var d=l.deckRow%2;l.x=d?Math.abs(c%this.cols-this.cols+1):c%this.cols,this.deck[c]=l,n.splice(u,1),c++}this.level=r},removeCards:function(t){for(var e in t){var n=t[e];this.cards.splice(this.cards.indexOf(n),1);for(var r=n.y-1;r>=0;r--){var s=this.findCard(n.x,r);s&&this.lowerCard(s)}}},findCard:function(t,e){return this.cards.find((function(n){return n.x==t&&n.y==e}))},findHit:function(){for(var t=this.rows-1;t>=0;t--)for(var e=0;e<this.cols;e++)for(var n=[],r=0,s=e;s<this.cols;s++){var a=this.findCard(s,t);if(a){if(n.push(a),r+=a.value,21==r)return n;if(r<21)continue}n=[],r=0}},cardValue:function(t){return"J"==t.rank||"Q"==t.rank||"K"==t.rank?10:"A"==t.rank?1:parseInt(t.rank,10)},addCard:function(t){return!this.findCard(t.x,0)&&(r["a"].set(t,"y",0),this.cards.push(t),!0)},main:function(){if("started"!=this.state&&(this.state="started"),!this.currentCard||!this.lowerCard(this.currentCard)){var t=this.findHit();if(t)return this.hit={x:t[0].x,y:t[0].y,length:t.length},this.hits+=1,this.score+=21,this.removeCards(t),void(this.currentCard=null);if(this.hit=null,this.currentCard=this.deck.pop(),!this.currentCard)return this.generateDeck(),void this.main();this.addCard(this.currentCard)||this.stop()}}}},tt=Z,et=Object(b["a"])(tt,i,o,!1,null,null,null),nt=et.exports,rt={name:"app",components:{GameApp:nt}},st=rt,at=(n("034f"),Object(b["a"])(st,s,a,!1,null,null,null)),it=at.exports,ot=n("9483");Object(ot["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),r["a"].config.productionTip=!1,r["a"].config.keyCodes={enter:[13,82],pause:[19,80],down:[40,83],right:[39,68],left:[37,65]},r["a"].directive("focus",{inserted:function(t){t.focus()}}),new r["a"]({render:function(t){return t(it)}}).$mount("#app")},"5b27":function(t,e,n){"use strict";var r=n("5fcb"),s=n.n(r);s.a},"5fcb":function(t,e,n){},"64a9":function(t,e,n){},"6d95":function(t,e,n){},7441:function(t,e,n){},b55b:function(t,e,n){"use strict";var r=n("f232"),s=n.n(r);s.a},c5f9:function(t,e,n){"use strict";var r=n("03ed"),s=n.n(r);s.a},ced9:function(t,e,n){"use strict";var r=n("7441"),s=n.n(r);s.a},d95b:function(t,e,n){},f232:function(t,e,n){}});
//# sourceMappingURL=app.7777130b.js.map